<div>
  <h2>Statistiques Bullish/Bearish</h2>

  <!-- Mode Live ou Historique -->
  <div class="mode-toggle">
    <label><input type="radio" [(ngModel)]="isLiveMode" [value]="true"> Live</label>
    <label><input type="radio" [(ngModel)]="isLiveMode" [value]="false"> Historique</label>
  </div>

  <!-- Sélection du type d'analyse -->
  <label for="analysis">Type d'analyse :</label>
  <select id="analysis" [(ngModel)]="selectedAnalysis">
    <option *ngFor="let analysis of analyses" [value]="analysis.value">
      {{ analysis.label }}
    </option>
  </select>

  <!-- Sélection du symbole -->
  <label for="symbol">Symbole :</label>
  <select id="symbol" [(ngModel)]="selectedSymbol">
    <option *ngFor="let symbol of symbols" [value]="symbol">{{ symbol }}</option>
  </select>

  <!-- Sélection Timeframes si requis -->
  <label>Timeframes :</label>
  <div class="timeframes-container">
    <label *ngFor="let tf of timeframes">
      <input type="checkbox" [value]="tf"
             (change)="toggleTimeframe(tf)">
      {{ tf }}
    </label>
  </div>

  <!-- Date Range si Historique -->
  <div *ngIf="!isLiveMode" class="date-range">
    <label for="start">Date de début :</label>
    <input type="date" id="start" [(ngModel)]="startDate">

    <label for="end">Date de fin :</label>
    <input type="date" id="end" [(ngModel)]="endDate">
  </div>

  <!-- Nombre de bougies si l'analyse le demande -->
  <div *ngIf="requiresMaxCandles(selectedAnalysis)">
    <label for="maxCandles">Nombre de dernières bougies :</label>
    <input type="number" id="maxCandles" [(ngModel)]="maxCandles">
  </div>

  <!-- Bouton de chargement -->
  <button (click)="loadStatistics()">Charger</button>

  <!-- Loader -->
  <div *ngIf="isLoading" class="loader">Chargement...</div>

  <!-- Affichage des résultats -->
  <table *ngIf="statistics">
    <thead>
    <tr>
      <th>Statistique</th>
      <th *ngFor="let tf of selectedTimeframes">{{ tf }}</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let statKey of statisticFields">
      <td><strong>{{ statKey }}</strong></td>
      <td *ngFor="let tf of selectedTimeframes">
        {{ statistics[tf]?.[statKey] !== undefined ? statistics[tf][statKey] : '-' }}
      </td>
    </tr>
    </tbody>
  </table>

  <!-- Autres résultats JSON bruts (optionnel) -->
  <pre *ngIf="rawResponse">{{ rawResponse | json }}</pre>

</div>
