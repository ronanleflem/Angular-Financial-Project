<div>
  <h2>Statistiques Bullish/Bearish</h2>

  <!-- Sélection du type de statistique -->
  <div class="mode-toggle">
    <label>
      <input type="radio" [(ngModel)]="isLiveMode" [value]="true"> Live
    </label>
    <label>
      <input type="radio" [(ngModel)]="isLiveMode" [value]="false"> Historique
    </label>
  </div>

  <label for="symbol">Symbole :</label>
  <select id="symbol" [(ngModel)]="selectedSymbol">
    <option *ngFor="let symbol of symbols" [value]="symbol">{{ symbol }}</option>
  </select>

  <label>Timeframes :</label>
  <div class="timeframes-container">
    <label *ngFor="let tf of timeframes">
      <input type="checkbox" [value]="tf"
             (change)="selectedTimeframes.includes(tf) ? selectedTimeframes.splice(selectedTimeframes.indexOf(tf), 1) : selectedTimeframes.push(tf)">
      {{ tf }}
    </label>
  </div>

  <!-- Date pickers si mode historique -->
  <div *ngIf="!isLiveMode" class="date-range">
    <label for="start">Date de début :</label>
    <input type="date" id="start" [(ngModel)]="startDate">

    <label for="end">Date de fin :</label>
    <input type="date" id="end" [(ngModel)]="endDate">
  </div>

  <button (click)="loadStatistics()">Charger</button>

  <div *ngIf="isLoading" class="loader">Chargement...</div>

  <table *ngIf="statistics">
    <thead>
    <tr>
      <th>Statistique</th>
      <th *ngFor="let tf of selectedTimeframes">{{ tf }}</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let statKey of statisticFields">
      <td><strong>{{ statKey }}</strong></td>
      <td *ngFor="let tf of selectedTimeframes">
        {{ statistics[tf]?.[statKey] !== undefined ? statistics[tf][statKey] : '-' }}
      </td>
    </tr>
    </tbody>
  </table>

</div>
